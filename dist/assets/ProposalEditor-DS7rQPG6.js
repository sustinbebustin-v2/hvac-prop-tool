import{q as p,b as R,c as O,d as Ie,h as Pe,j as n,B as V,D as et,l as de,s as Tt,t as Oe,x as Se,M as Ke,r as G,F as At,R as je,m as Rt,P as Nt,S as W,o as D,T as q,G as kt,N as zt,C as Dt,L as _t,J as se,O as $t,Q as Lt}from"./index-o1jhjknc.js";import{B as Bt,u as Ft,a as Ht}from"./hooks-B7xWFklZ.js";import{M as Mt,u as tt,P as Vt,a as qt,b as Wt,L as Gt,m as Kt,T as Q,N as ae}from"./proxy-BwM-woTe.js";import{b as ot,a as Ut,G as te}from"./Group-CEcvISHj.js";import{u as Zt,T as ie}from"./use-form-CYUSrPjR.js";import{S as Qt,I as Yt}from"./IconEdit-DVGs5ui_.js";import{C as le}from"./Card-uICau0cm.js";import{I as rt,a as pe}from"./InputBase-CmeBW0gA.js";import{P as me,i as Te,a as Jt}from"./Popover-C_0VBstY.js";function Xt(e){const t=p.useRef(void 0);return p.useEffect(()=>{t.current=e},[e]),t.current}var eo={};function to(){return typeof process<"u"&&eo?"production":"development"}function nt(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>nt(t))}:e}function oo(e){return e?e.map(t=>nt(t)):[]}function st(e){return e.reduce((t,o)=>"group"in o?{...t,...st(o.items)}:(t[o.value]=o,t),{})}var k={dropdown:"m_88b62a41",search:"m_985517d8",options:"m_b2821a6e",option:"m_92253aa5",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const ro={error:null},no=Pe((e,{size:t,color:o})=>({chevron:{"--combobox-chevron-size":de(t,"combobox-chevron-size"),"--combobox-chevron-color":o?et(o,e):void 0}})),Ae=R((e,t)=>{const o=O("ComboboxChevron",ro,e),{size:r,error:i,style:d,className:s,classNames:c,styles:u,unstyled:a,vars:f,mod:m,...l}=o,h=Ie({name:"ComboboxChevron",classes:k,props:o,style:d,className:s,classNames:c,styles:u,unstyled:a,vars:f,varsResolver:no,rootSelector:"chevron"});return n.jsx(V,{component:"svg",...l,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},m],ref:t,children:n.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});Ae.classes=k;Ae.displayName="@mantine/core/ComboboxChevron";const[so,_]=Tt("Combobox component was not found in tree"),at=p.forwardRef(({size:e,onMouseDown:t,onClick:o,onClear:r,...i},d)=>n.jsx(rt.ClearButton,{ref:d,tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:s=>{s.preventDefault(),t==null||t(s)},onClick:s=>{r(),o==null||o(s)}}));at.displayName="@mantine/core/ComboboxClearButton";const ao={},Re=R((e,t)=>{const{classNames:o,styles:r,className:i,style:d,hidden:s,...c}=O("ComboboxDropdown",ao,e),u=_();return n.jsx(me.Dropdown,{...c,ref:t,role:"presentation","data-hidden":s||void 0,...u.getStyles("dropdown",{className:i,style:d,classNames:o,styles:r})})});Re.classes=k;Re.displayName="@mantine/core/ComboboxDropdown";const io={refProp:"ref"},it=R((e,t)=>{const{children:o,refProp:r}=O("ComboboxDropdownTarget",io,e);if(_(),!Te(o))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return n.jsx(me.Target,{ref:t,refProp:r,children:o})});it.displayName="@mantine/core/ComboboxDropdownTarget";const lo={},Ne=R((e,t)=>{const{classNames:o,className:r,style:i,styles:d,vars:s,...c}=O("ComboboxEmpty",lo,e),u=_();return n.jsx(V,{ref:t,...u.getStyles("empty",{className:r,classNames:o,styles:d,style:i}),...c})});Ne.classes=k;Ne.displayName="@mantine/core/ComboboxEmpty";function ke({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:o,withExpandedAttribute:r,targetType:i,autoComplete:d}){const s=_(),[c,u]=p.useState(null),a=m=>{if(e==null||e(m),!s.readOnly&&t){if(m.nativeEvent.isComposing)return;if(m.nativeEvent.code==="ArrowDown"&&(m.preventDefault(),s.store.dropdownOpened?u(s.store.selectNextOption()):(s.store.openDropdown("keyboard"),u(s.store.selectActiveOption()),s.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),m.nativeEvent.code==="ArrowUp"&&(m.preventDefault(),s.store.dropdownOpened?u(s.store.selectPreviousOption()):(s.store.openDropdown("keyboard"),u(s.store.selectActiveOption()),s.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),m.nativeEvent.code==="Enter"||m.nativeEvent.code==="NumpadEnter"){if(m.nativeEvent.keyCode===229)return;const l=s.store.getSelectedOptionIndex();s.store.dropdownOpened&&l!==-1?(m.preventDefault(),s.store.clickSelectedOption()):i==="button"&&(m.preventDefault(),s.store.openDropdown("keyboard"))}m.key==="Escape"&&s.store.closeDropdown("keyboard"),m.nativeEvent.code==="Space"&&i==="button"&&(m.preventDefault(),s.store.toggleDropdown("keyboard"))}};return{...o?{"aria-haspopup":"listbox","aria-expanded":r&&!!(s.store.listId&&s.store.dropdownOpened)||void 0,"aria-controls":s.store.dropdownOpened?s.store.listId:void 0,"aria-activedescendant":s.store.dropdownOpened&&c||void 0,autoComplete:d,"data-expanded":s.store.dropdownOpened||void 0,"data-mantine-stop-propagation":s.store.dropdownOpened||void 0}:{},onKeyDown:a}}const co={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},lt=R((e,t)=>{const{children:o,refProp:r,withKeyboardNavigation:i,withAriaAttributes:d,withExpandedAttribute:s,targetType:c,autoComplete:u,...a}=O("ComboboxEventsTarget",co,e);if(!Te(o))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const f=_(),m=ke({targetType:c,withAriaAttributes:d,withKeyboardNavigation:i,withExpandedAttribute:s,onKeyDown:o.props.onKeyDown,autoComplete:u});return p.cloneElement(o,{...m,...a,[r]:Oe(t,f.store.targetRef,Jt(o))})});lt.displayName="@mantine/core/ComboboxEventsTarget";const uo={},ze=R((e,t)=>{const{classNames:o,className:r,style:i,styles:d,vars:s,...c}=O("ComboboxFooter",uo,e),u=_();return n.jsx(V,{ref:t,...u.getStyles("footer",{className:r,classNames:o,style:i,styles:d}),...c,onMouseDown:a=>{a.preventDefault()}})});ze.classes=k;ze.displayName="@mantine/core/ComboboxFooter";const po={},De=R((e,t)=>{const{classNames:o,className:r,style:i,styles:d,vars:s,children:c,label:u,...a}=O("ComboboxGroup",po,e),f=_();return n.jsxs(V,{ref:t,...f.getStyles("group",{className:r,classNames:o,style:i,styles:d}),...a,children:[u&&n.jsx("div",{...f.getStyles("groupLabel",{classNames:o,styles:d}),children:u}),c]})});De.classes=k;De.displayName="@mantine/core/ComboboxGroup";const mo={},_e=R((e,t)=>{const{classNames:o,className:r,style:i,styles:d,vars:s,...c}=O("ComboboxHeader",mo,e),u=_();return n.jsx(V,{ref:t,...u.getStyles("header",{className:r,classNames:o,style:i,styles:d}),...c,onMouseDown:a=>{a.preventDefault()}})});_e.classes=k;_e.displayName="@mantine/core/ComboboxHeader";function ct({value:e,valuesDivider:t=",",...o}){return n.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...o})}ct.displayName="@mantine/core/ComboboxHiddenInput";const fo={},$e=R((e,t)=>{const o=O("ComboboxOption",fo,e),{classNames:r,className:i,style:d,styles:s,vars:c,onClick:u,id:a,active:f,onMouseDown:m,onMouseOver:l,disabled:h,selected:E,mod:j,...y}=o,S=_(),P=p.useId(),w=a||P;return n.jsx(V,{...S.getStyles("option",{className:i,classNames:r,styles:s,style:d}),...y,ref:t,id:w,mod:["combobox-option",{"combobox-active":f,"combobox-disabled":h,"combobox-selected":E},j],role:"option",onClick:b=>{var g;h?b.preventDefault():((g=S.onOptionSubmit)==null||g.call(S,o.value,o),u==null||u(b))},onMouseDown:b=>{b.preventDefault(),m==null||m(b)},onMouseOver:b=>{S.resetSelectionOnOptionHover&&S.store.resetSelectedOption(),l==null||l(b)}})});$e.classes=k;$e.displayName="@mantine/core/ComboboxOption";const ho={},Le=R((e,t)=>{const o=O("ComboboxOptions",ho,e),{classNames:r,className:i,style:d,styles:s,id:c,onMouseDown:u,labelledBy:a,...f}=o,m=_(),l=ot(c);return p.useEffect(()=>{m.store.setListId(l)},[l]),n.jsx(V,{ref:t,...m.getStyles("options",{className:i,style:d,classNames:r,styles:s}),...f,id:l,role:"listbox","aria-labelledby":a,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});Le.classes=k;Le.displayName="@mantine/core/ComboboxOptions";const bo={withAriaAttributes:!0,withKeyboardNavigation:!0},Be=R((e,t)=>{const o=O("ComboboxSearch",bo,e),{classNames:r,styles:i,unstyled:d,vars:s,withAriaAttributes:c,onKeyDown:u,withKeyboardNavigation:a,size:f,...m}=o,l=_(),h=l.getStyles("search"),E=ke({targetType:"input",withAriaAttributes:c,withKeyboardNavigation:a,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return n.jsx(rt,{ref:Oe(t,l.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:f||l.size,...E,...m,__staticSelector:"Combobox"})});Be.classes=k;Be.displayName="@mantine/core/ComboboxSearch";const vo={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},dt=R((e,t)=>{const{children:o,refProp:r,withKeyboardNavigation:i,withAriaAttributes:d,withExpandedAttribute:s,targetType:c,autoComplete:u,...a}=O("ComboboxTarget",vo,e);if(!Te(o))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const f=_(),m=ke({targetType:c,withAriaAttributes:d,withKeyboardNavigation:i,withExpandedAttribute:s,onKeyDown:o.props.onKeyDown,autoComplete:u}),l=p.cloneElement(o,{...m,...a});return n.jsx(me.Target,{ref:Oe(t,f.store.targetRef),children:l})});dt.displayName="@mantine/core/ComboboxTarget";function go(e,t,o){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(o){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function xo(e,t,o){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(o){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function yo(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function ut({defaultOpened:e,opened:t,onOpenedChange:o,onDropdownClose:r,onDropdownOpen:i,loop:d=!0,scrollBehavior:s="instant"}={}){const[c,u]=Se({value:t,defaultValue:e,finalValue:!1,onChange:o}),a=p.useRef(null),f=p.useRef(-1),m=p.useRef(null),l=p.useRef(null),h=p.useRef(-1),E=p.useRef(-1),j=p.useRef(-1),y=p.useCallback((v="unknown")=>{c||(u(!0),i==null||i(v))},[u,i,c]),S=p.useCallback((v="unknown")=>{c&&(u(!1),r==null||r(v))},[u,r,c]),P=p.useCallback((v="unknown")=>{c?S(v):y(v)},[S,y,c]),w=p.useCallback(()=>{const v=document.querySelector(`#${a.current} [data-combobox-selected]`);v==null||v.removeAttribute("data-combobox-selected"),v==null||v.removeAttribute("aria-selected")},[]),b=p.useCallback(v=>{const T=document.getElementById(a.current),I=T==null?void 0:T.querySelectorAll("[data-combobox-option]");if(!I)return null;const N=v>=I.length?0:v<0?I.length-1:v;return f.current=N,I!=null&&I[N]&&!I[N].hasAttribute("data-combobox-disabled")?(w(),I[N].setAttribute("data-combobox-selected","true"),I[N].setAttribute("aria-selected","true"),I[N].scrollIntoView({block:"nearest",behavior:s}),I[N].id):null},[s,w]),g=p.useCallback(()=>{const v=document.querySelector(`#${a.current} [data-combobox-active]`);if(v){const T=document.querySelectorAll(`#${a.current} [data-combobox-option]`),I=Array.from(T).findIndex(N=>N===v);return b(I)}return b(0)},[b]),C=p.useCallback(()=>b(xo(f.current,document.querySelectorAll(`#${a.current} [data-combobox-option]`),d)),[b,d]),F=p.useCallback(()=>b(go(f.current,document.querySelectorAll(`#${a.current} [data-combobox-option]`),d)),[b,d]),K=p.useCallback(()=>b(yo(document.querySelectorAll(`#${a.current} [data-combobox-option]`))),[b]),J=p.useCallback((v="selected",T)=>{j.current=window.setTimeout(()=>{var re;const I=document.querySelectorAll(`#${a.current} [data-combobox-option]`),N=Array.from(I).findIndex(ge=>ge.hasAttribute(`data-combobox-${v}`));f.current=N,T!=null&&T.scrollIntoView&&((re=I[N])==null||re.scrollIntoView({block:"nearest",behavior:s}))},0)},[]),fe=p.useCallback(()=>{f.current=-1,w()},[w]),X=p.useCallback(()=>{const v=document.querySelectorAll(`#${a.current} [data-combobox-option]`),T=v==null?void 0:v[f.current];T==null||T.click()},[]),H=p.useCallback(v=>{a.current=v},[]),he=p.useCallback(()=>{h.current=window.setTimeout(()=>m.current.focus(),0)},[]),be=p.useCallback(()=>{E.current=window.setTimeout(()=>l.current.focus(),0)},[]),ve=p.useCallback(()=>f.current,[]);return p.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(E.current),window.clearTimeout(j.current)},[]),{dropdownOpened:c,openDropdown:y,closeDropdown:S,toggleDropdown:P,selectedOptionIndex:f.current,getSelectedOptionIndex:ve,selectOption:b,selectFirstOption:K,selectActiveOption:g,selectNextOption:C,selectPreviousOption:F,resetSelectedOption:fe,updateSelectedOptionIndex:J,listId:a.current,setListId:H,clickSelectedOption:X,searchRef:m,focusSearchInput:he,targetRef:l,focusTarget:be}}const wo={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},Co=Pe((e,{size:t,dropdownPadding:o})=>({options:{"--combobox-option-fz":Ke(t),"--combobox-option-padding":de(t,"combobox-option-padding")},dropdown:{"--combobox-padding":o===void 0?void 0:G(o),"--combobox-option-fz":Ke(t),"--combobox-option-padding":de(t,"combobox-option-padding")}}));function x(e){const t=O("Combobox",wo,e),{classNames:o,styles:r,unstyled:i,children:d,store:s,vars:c,onOptionSubmit:u,onClose:a,size:f,dropdownPadding:m,resetSelectionOnOptionHover:l,__staticSelector:h,readOnly:E,...j}=t,y=ut(),S=s||y,P=Ie({name:h||"Combobox",classes:k,props:t,classNames:o,styles:r,unstyled:i,vars:c,varsResolver:Co}),w=()=>{a==null||a(),S.closeDropdown()};return n.jsx(so,{value:{getStyles:P,store:S,onOptionSubmit:u,size:f,resetSelectionOnOptionHover:l,readOnly:E},children:n.jsx(me,{opened:S.dropdownOpened,...j,onChange:b=>!b&&w(),withRoles:!1,unstyled:i,children:d})})}const So=e=>e;x.extend=So;x.classes=k;x.displayName="@mantine/core/Combobox";x.Target=dt;x.Dropdown=Re;x.Options=Le;x.Option=$e;x.Search=Be;x.Empty=Ne;x.Chevron=Ae;x.Footer=ze;x.Header=_e;x.EventsTarget=lt;x.DropdownTarget=it;x.Group=De;x.ClearButton=at;x.HiddenInput=ct;function jo({size:e,style:t,...o}){const r=e!==void 0?{width:G(e),height:G(e),...t}:t;return n.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...o,children:n.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function oe(e){return"group"in e}function pt({options:e,search:t,limit:o}){const r=t.trim().toLowerCase(),i=[];for(let d=0;d<e.length;d+=1){const s=e[d];if(i.length===o)return i;oe(s)&&i.push({group:s.group,items:pt({options:s.items,search:t,limit:o-i.length})}),oe(s)||s.label.toLowerCase().includes(r)&&i.push(s)}return i}function Eo(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function mt(e,t=new Set){if(Array.isArray(e))for(const o of e)if(oe(o))mt(o.items,t);else{if(typeof o.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof o.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof o.value}`);if(t.has(o.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${o.value}" was provided more than once`);t.add(o.value)}}function Io(e,t){return Array.isArray(e)?e.includes(t):e===t}function ft({data:e,withCheckIcon:t,value:o,checkIconPosition:r,unstyled:i,renderOption:d}){if(!oe(e)){const c=Io(o,e.value),u=t&&c&&n.jsx(jo,{className:k.optionsDropdownCheckIcon}),a=n.jsxs(n.Fragment,{children:[r==="left"&&u,n.jsx("span",{children:e.label}),r==="right"&&u]});return n.jsx(x.Option,{value:e.value,disabled:e.disabled,className:At({[k.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":c||void 0,"aria-selected":c,active:c,children:typeof d=="function"?d({option:e,checked:c}):a})}const s=e.items.map(c=>n.jsx(ft,{data:c,value:o,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:d},c.value));return n.jsx(x.Group,{label:e.group,children:s})}function Po({data:e,hidden:t,hiddenWhenEmpty:o,filter:r,search:i,limit:d,maxDropdownHeight:s,withScrollArea:c=!0,filterOptions:u=!0,withCheckIcon:a=!1,value:f,checkIconPosition:m,nothingFoundMessage:l,unstyled:h,labelId:E,renderOption:j,scrollAreaProps:y,"aria-label":S}){mt(e);const w=typeof i=="string"?(r||pt)({options:e,search:u?i:"",limit:d??1/0}):e,b=Eo(w),g=w.map(C=>n.jsx(ft,{data:C,withCheckIcon:a,value:f,checkIconPosition:m,unstyled:h,renderOption:j},oe(C)?C.group:C.value));return n.jsx(x.Dropdown,{hidden:t||o&&b,"data-composed":!0,children:n.jsxs(x.Options,{labelledBy:E,"aria-label":S,children:[c?n.jsx(Qt.Autosize,{mah:s??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...y,children:g}):g,b&&l&&n.jsx(x.Empty,{children:l})]})})}var ht={root:"m_3eebeb36",label:"m_9e365f20"};const Oo={orientation:"horizontal"},To=Pe((e,{color:t,variant:o,size:r})=>({root:{"--divider-color":t?et(t,e):void 0,"--divider-border-style":o,"--divider-size":de(r,"divider-size")}})),Fe=R((e,t)=>{const o=O("Divider",Oo,e),{classNames:r,className:i,style:d,styles:s,unstyled:c,vars:u,color:a,orientation:f,label:m,labelPosition:l,mod:h,...E}=o,j=Ie({name:"Divider",classes:ht,props:o,className:i,style:d,classNames:r,styles:s,unstyled:c,vars:u,varsResolver:To});return n.jsx(V,{ref:t,mod:[{orientation:f,"with-label":!!m},h],...j("root"),...E,role:"separator",children:m&&n.jsx(V,{component:"span",mod:{position:l},...j("label"),children:m})})});Fe.classes=ht;Fe.displayName="@mantine/core/Divider";function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)({}).hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},Ee.apply(null,arguments)}function Ao(e,t){if(e==null)return{};var o={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;o[r]=e[r]}return o}var Ro=p.useLayoutEffect,No=function(t){var o=je.useRef(t);return Ro(function(){o.current=t}),o},Ue=function(t,o){if(typeof t=="function"){t(o);return}t.current=o},ko=function(t,o){var r=je.useRef();return je.useCallback(function(i){t.current=i,r.current&&Ue(r.current,null),r.current=o,o&&Ue(o,i)},[o])},Ze={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},zo=function(t){Object.keys(Ze).forEach(function(o){t.style.setProperty(o,Ze[o],"important")})},Qe=zo,A=null,Ye=function(t,o){var r=t.scrollHeight;return o.sizingStyle.boxSizing==="border-box"?r+o.borderSize:r-o.paddingSize};function Do(e,t,o,r){o===void 0&&(o=1),r===void 0&&(r=1/0),A||(A=document.createElement("textarea"),A.setAttribute("tabindex","-1"),A.setAttribute("aria-hidden","true"),Qe(A)),A.parentNode===null&&document.body.appendChild(A);var i=e.paddingSize,d=e.borderSize,s=e.sizingStyle,c=s.boxSizing;Object.keys(s).forEach(function(l){var h=l;A.style[h]=s[h]}),Qe(A),A.value=t;var u=Ye(A,e);A.value=t,u=Ye(A,e),A.value="x";var a=A.scrollHeight-i,f=a*o;c==="border-box"&&(f=f+i+d),u=Math.max(f,u);var m=a*r;return c==="border-box"&&(m=m+i+d),u=Math.min(m,u),[u,a]}var Je=function(){},_o=function(t,o){return t.reduce(function(r,i){return r[i]=o[i],r},{})},$o=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],Lo=!!document.documentElement.currentStyle,Bo=function(t){var o=window.getComputedStyle(t);if(o===null)return null;var r=_o($o,o),i=r.boxSizing;if(i==="")return null;Lo&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var d=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),s=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:d,borderSize:s}},Fo=Bo;function bt(e,t,o){var r=No(o);p.useLayoutEffect(function(){var i=function(s){return r.current(s)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var Ho=function(t){bt(window,"resize",t)},Mo=function(t){bt(document.fonts,"loadingdone",t)},Vo=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],qo=function(t,o){var r=t.cacheMeasurements,i=t.maxRows,d=t.minRows,s=t.onChange,c=s===void 0?Je:s,u=t.onHeightChange,a=u===void 0?Je:u,f=Ao(t,Vo),m=f.value!==void 0,l=p.useRef(null),h=ko(l,o),E=p.useRef(0),j=p.useRef(),y=function(){var w=l.current,b=r&&j.current?j.current:Fo(w);if(b){j.current=b;var g=Do(b,w.value||w.placeholder||"x",d,i),C=g[0],F=g[1];E.current!==C&&(E.current=C,w.style.setProperty("height",C+"px","important"),a(C,{rowHeight:F}))}},S=function(w){m||y(),c(w)};return p.useLayoutEffect(y),Ho(y),Mo(y),p.createElement("textarea",Ee({},f,{onChange:S,ref:h}))},Wo=p.forwardRef(qo);const Go={},Y=R((e,t)=>{const{autosize:o,maxRows:r,minRows:i,__staticSelector:d,resize:s,...c}=O("Textarea",Go,e),u=o&&to()!=="test",a=u?{maxRows:r,minRows:i}:{};return n.jsx(pe,{component:u?Wo:"textarea",ref:t,...c,__staticSelector:d||"Textarea",multiline:!0,"data-no-overflow":o&&r===void 0||void 0,__vars:{"--input-resize":s},...a})});Y.classes=pe.classes;Y.displayName="@mantine/core/Textarea";const Ko={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},ue=R((e,t)=>{const o=O("Select",Ko,e),{classNames:r,styles:i,unstyled:d,vars:s,dropdownOpened:c,defaultDropdownOpened:u,onDropdownClose:a,onDropdownOpen:f,onFocus:m,onBlur:l,onClick:h,onChange:E,data:j,value:y,defaultValue:S,selectFirstOptionOnChange:P,onOptionSubmit:w,comboboxProps:b,readOnly:g,disabled:C,filter:F,limit:K,withScrollArea:J,maxDropdownHeight:fe,size:X,searchable:H,rightSection:he,checkIconPosition:be,withCheckIcon:ve,nothingFoundMessage:v,name:T,form:I,searchValue:N,defaultSearchValue:re,onSearchChange:ge,allowDeselect:vt,error:He,rightSectionPointerEvents:gt,id:xt,clearable:yt,clearButtonProps:wt,hiddenInputProps:Ct,renderOption:St,onClear:xe,autoComplete:jt,scrollAreaProps:Et,__defaultRightSection:nr,__clearSection:sr,__clearable:ar,chevronColor:It,...ne}=o,ye=p.useMemo(()=>oo(j),[j]),ee=p.useMemo(()=>st(ye),[ye]),Me=ot(xt),[B,Ve,Pt]=Se({value:y,defaultValue:S,finalValue:null,onChange:E}),$=typeof B=="string"?ee[B]:void 0,U=Xt($),[we,Z]=Se({value:N,defaultValue:re,finalValue:$?$.label:"",onChange:ge}),L=ut({opened:c,defaultOpened:u,onDropdownOpen:()=>{f==null||f(),L.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{a==null||a(),L.resetSelectedOption()}}),{resolvedClassNames:qe,resolvedStyles:We}=Ut({props:o,styles:i,classNames:r});p.useEffect(()=>{P&&L.selectFirstOption()},[P,B]),p.useEffect(()=>{y===null&&Z(""),typeof y=="string"&&$&&((U==null?void 0:U.value)!==$.value||(U==null?void 0:U.label)!==$.label)&&Z($.label)},[y,$]);const Ot=n.jsx(x.ClearButton,{...wt,onClear:()=>{Ve(null,null),Z(""),xe==null||xe()}}),Ge=yt&&!!B&&!C&&!g;return n.jsxs(n.Fragment,{children:[n.jsxs(x,{store:L,__staticSelector:"Select",classNames:qe,styles:We,unstyled:d,readOnly:g,onOptionSubmit:z=>{w==null||w(z);const M=vt&&ee[z].value===B?null:ee[z],Ce=M?M.value:null;Ce!==B&&Ve(Ce,M),!Pt&&Z(typeof Ce=="string"&&(M==null?void 0:M.label)||""),L.closeDropdown()},size:X,...b,children:[n.jsx(x.Target,{targetType:H?"input":"button",autoComplete:jt,children:n.jsx(pe,{id:Me,ref:t,__defaultRightSection:n.jsx(x.Chevron,{size:X,error:He,unstyled:d,color:It}),__clearSection:Ot,__clearable:Ge,rightSection:he,rightSectionPointerEvents:gt||(Ge?"all":"none"),...ne,size:X,__staticSelector:"Select",disabled:C,readOnly:g||!H,value:we,onChange:z=>{Z(z.currentTarget.value),L.openDropdown(),P&&L.selectFirstOption()},onFocus:z=>{H&&L.openDropdown(),m==null||m(z)},onBlur:z=>{var M;H&&L.closeDropdown(),Z(B!=null&&((M=ee[B])==null?void 0:M.label)||""),l==null||l(z)},onClick:z=>{H?L.openDropdown():L.toggleDropdown(),h==null||h(z)},classNames:qe,styles:We,unstyled:d,pointer:!H,error:He})}),n.jsx(Po,{data:ye,hidden:g||C,filter:F,search:we,limit:K,hiddenWhenEmpty:!v,withScrollArea:J,maxDropdownHeight:fe,filterOptions:H&&($==null?void 0:$.label)!==we,value:B,checkIconPosition:be,withCheckIcon:ve,nothingFoundMessage:v,unstyled:d,labelId:ne.label?`${Me}-label`:void 0,"aria-label":ne.label?void 0:ne["aria-label"],renderOption:St,scrollAreaProps:Et})]}),n.jsx(x.HiddenInput,{value:B,name:T,form:I,disabled:C,...Ct})]})});ue.classes={...pe.classes,...x.classes};ue.displayName="@mantine/core/Select";var Uo=Rt("eye","IconEye",[["path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6",key:"svg-1"}]]);class Zo extends p.Component{getSnapshotBeforeUpdate(t){const o=this.props.childRef.current;if(o&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=o.offsetHeight||0,r.width=o.offsetWidth||0,r.top=o.offsetTop,r.left=o.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Qo({children:e,isPresent:t}){const o=p.useId(),r=p.useRef(null),i=p.useRef({width:0,height:0,top:0,left:0}),{nonce:d}=p.useContext(Mt);return p.useInsertionEffect(()=>{const{width:s,height:c,top:u,left:a}=i.current;if(t||!r.current||!s||!c)return;r.current.dataset.motionPopId=o;const f=document.createElement("style");return d&&(f.nonce=d),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${c}px !important;
            top: ${u}px !important;
            left: ${a}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[t]),n.jsx(Zo,{isPresent:t,childRef:r,sizeRef:i,children:p.cloneElement(e,{ref:r})})}const Yo=({children:e,initial:t,isPresent:o,onExitComplete:r,custom:i,presenceAffectsLayout:d,mode:s})=>{const c=tt(Jo),u=p.useId(),a=p.useCallback(m=>{c.set(m,!0);for(const l of c.values())if(!l)return;r&&r()},[c,r]),f=p.useMemo(()=>({id:u,initial:t,isPresent:o,custom:i,onExitComplete:a,register:m=>(c.set(m,!1),()=>c.delete(m))}),d?[Math.random(),a]:[o,a]);return p.useMemo(()=>{c.forEach((m,l)=>c.set(l,!1))},[o]),p.useEffect(()=>{!o&&!c.size&&r&&r()},[o]),s==="popLayout"&&(e=n.jsx(Qo,{isPresent:o,children:e})),n.jsx(Vt.Provider,{value:f,children:e})};function Jo(){return new Map}const ce=e=>e.key||"";function Xe(e){const t=[];return p.Children.forEach(e,o=>{p.isValidElement(o)&&t.push(o)}),t}const Xo=({children:e,custom:t,initial:o=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:d="sync",propagate:s=!1})=>{const[c,u]=qt(s),a=p.useMemo(()=>Xe(e),[e]),f=s&&!c?[]:a.map(ce),m=p.useRef(!0),l=p.useRef(a),h=tt(()=>new Map),[E,j]=p.useState(a),[y,S]=p.useState(a);Wt(()=>{m.current=!1,l.current=a;for(let b=0;b<y.length;b++){const g=ce(y[b]);f.includes(g)?h.delete(g):h.get(g)!==!0&&h.set(g,!1)}},[y,f.length,f.join("-")]);const P=[];if(a!==E){let b=[...a];for(let g=0;g<y.length;g++){const C=y[g],F=ce(C);f.includes(F)||(b.splice(g,0,C),P.push(C))}d==="wait"&&P.length&&(b=P),S(Xe(b)),j(a);return}const{forceRender:w}=p.useContext(Gt);return n.jsx(n.Fragment,{children:y.map(b=>{const g=ce(b),C=s&&!c?!1:a===y||f.includes(g),F=()=>{if(h.has(g))h.set(g,!0);else return;let K=!0;h.forEach(J=>{J||(K=!1)}),K&&(w==null||w(),S(l.current),s&&(u==null||u()),r&&r())};return n.jsx(Yo,{isPresent:C,initial:!m.current||o?void 0:!1,custom:C?void 0:t,presenceAffectsLayout:i,mode:d,onExitComplete:C?void 0:F,children:b},g)})})};function er({proposal:e}){const t={draft:"var(--mantine-color-gray-6)",sent:"var(--mantine-color-blue-6)",accepted:"var(--mantine-color-green-6)",rejected:"var(--mantine-color-red-6)"};return n.jsx(Xo,{children:n.jsx(Kt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,ease:"easeOut"},children:n.jsx(Nt,{shadow:"sm",p:"xl",radius:"md",withBorder:!0,children:n.jsxs(W,{gap:"lg",children:[n.jsxs("div",{children:[n.jsx(D,{size:"sm",style:{color:"var(--mantine-color-gray-6)"},children:"Proposal for"}),n.jsx(q,{order:2,style:{color:"var(--mantine-color-brand-6)"},children:e.client})]}),n.jsxs(te,{gap:"md",children:[n.jsx(Bt,{variant:"light",style:{backgroundColor:`color-mix(in srgb, ${t[e.status]} 10%, transparent)`,color:t[e.status]},children:e.status}),n.jsx(D,{size:"sm",style:{color:"var(--mantine-color-gray-6)"},children:e.date})]}),n.jsxs("div",{children:[n.jsx(q,{order:3,size:"h4",mb:"xs",children:e.title}),n.jsx(D,{children:e.description})]}),n.jsx(Fe,{}),n.jsxs("div",{children:[n.jsx(D,{size:"sm",style:{color:"var(--mantine-color-gray-6)"},mb:"xs",children:"Total Investment"}),n.jsxs(q,{order:2,style:{color:"var(--mantine-color-brand-6)"},children:["$",e.value.toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx(D,{size:"sm",style:{color:"var(--mantine-color-gray-6)"},mb:"xs",children:"What's Included"}),n.jsxs(W,{gap:"xs",children:[n.jsx(D,{children:"• Professional installation by certified technicians"}),n.jsx(D,{children:"• Full system testing and configuration"}),n.jsx(D,{children:"• 1-year warranty on parts and labor"}),n.jsx(D,{children:"• 24/7 emergency support"})]})]}),n.jsxs("div",{children:[n.jsx(D,{size:"sm",style:{color:"var(--mantine-color-gray-6)"},mb:"xs",children:"Terms & Conditions"}),n.jsx(D,{size:"sm",children:"This proposal is valid for 30 days from the date of issue. Payment terms: 50% upon acceptance, 50% upon completion. All work will be performed according to local building codes and regulations."})]})]})})})})}const tr=[{title:"Energy Efficiency",description:"Reduce your energy consumption and monthly bills",icon:"efficiency"},{title:"Comfort",description:"Maintain consistent temperature throughout your space",icon:"comfort"},{title:"Air Quality",description:"Improve indoor air quality for better health",icon:"quality"}],or=[{title:"Initial Assessment",description:"Thorough evaluation of your current system and needs",status:"pending"},{title:"System Removal",description:"Safe removal of existing equipment",status:"pending"},{title:"New System Installation",description:"Professional installation of your new HVAC system",status:"pending"},{title:"Testing & Calibration",description:"Comprehensive testing and system optimization",status:"pending"}],rr=["10-year warranty on parts","Labor covered for first 2 years","24/7 emergency support","Annual maintenance included for first year"];function br(){const e=kt(),t=Ft(),{id:o}=zt(),{items:r,loading:i,error:d}=Ht(l=>l.proposals),s=o?r[o]:null,[c,u]=p.useState("edit"),a=Zt({initialValues:{title:"",client:"",description:"",value:0,monthlySavings:0,status:"draft",companyLogo:"",coverImage:"",sections:{overview:"",serviceBreakdown:{services:[{name:"",description:"",price:0}]},installationProcess:{steps:or},benefits:tr,warranty:{coverage:"Comprehensive coverage for your peace of mind",duration:"10 years",terms:rr},terms:"Standard terms and conditions apply."},incentives:[{name:"Federal Tax Credit",description:"Available federal incentive for energy-efficient systems",amount:0,type:"tax_credit"}],signatures:{}},validate:{title:l=>l.length<3?"Title must be at least 3 characters long":null,client:l=>l.length<2?"Client name must be at least 2 characters long":null,value:l=>l<=0?"Value must be greater than 0":null,monthlySavings:l=>l<0?"Monthly savings cannot be negative":null,sections:{overview:l=>l.length<10?"Overview must be at least 10 characters long":null,serviceBreakdown:{services:{name:l=>l.length<3?"Service name must be at least 3 characters long":null,description:l=>l.length<10?"Description must be at least 10 characters long":null,price:l=>l<=0?"Price must be greater than 0":null}}}}});p.useEffect(()=>{s&&a.setValues({title:s.title,client:s.client,description:s.description,value:s.value,monthlySavings:s.monthlySavings,status:s.status,companyLogo:s.companyLogo,coverImage:s.coverImage,sections:s.sections,incentives:s.incentives,signatures:s.signatures})},[s]);const f=async l=>{try{o?await t($t({...l,id:o,date:s.date,publicId:s.publicId,tracking:s.tracking})):await t(Lt(l)),e("/proposals")}catch(h){console.error("Failed to save proposal:",h)}},m={id:o||"preview",publicId:o&&(s==null?void 0:s.publicId)||"preview",date:new Date().toISOString().split("T")[0],tracking:{lastModified:new Date},...a.values};return n.jsxs(Dt,{size:"xl",py:"xl",pos:"relative",children:[n.jsx(_t,{visible:i}),d&&n.jsx(D,{style:{color:"var(--mantine-color-error)"},mb:"md",children:d}),n.jsxs(te,{justify:"space-between",mb:"xl",children:[n.jsx(q,{order:2,children:o?"Edit Proposal":"Create New Proposal"}),n.jsxs(te,{children:[n.jsx(se,{variant:"light",onClick:()=>e("/proposals"),children:"Cancel"}),c==="edit"&&n.jsx(se,{type:"submit",form:"proposal-form",children:"Save Proposal"})]})]}),n.jsxs(Q,{value:c,onChange:l=>u(l),children:[n.jsxs(Q.List,{mb:"xl",children:[n.jsx(Q.Tab,{value:"edit",leftSection:n.jsx(Yt,{style:{width:G(16),height:G(16)}}),children:"Edit"}),n.jsx(Q.Tab,{value:"preview",leftSection:n.jsx(Uo,{style:{width:G(16),height:G(16)}}),children:"Preview"})]}),n.jsx(Q.Panel,{value:"edit",children:n.jsx("form",{id:"proposal-form",onSubmit:a.onSubmit(f),children:n.jsxs(W,{gap:"xl",children:[n.jsxs(le,{withBorder:!0,p:"lg",children:[n.jsx(q,{order:3,size:"h4",mb:"lg",children:"Basic Information"}),n.jsxs(W,{gap:"md",children:[n.jsx(ie,{label:"Title",placeholder:"Enter proposal title",required:!0,...a.getInputProps("title")}),n.jsx(ie,{label:"Client",placeholder:"Enter client name",required:!0,...a.getInputProps("client")}),n.jsx(Y,{label:"Description",placeholder:"Enter proposal description",minRows:4,...a.getInputProps("description")}),n.jsx(ae,{label:"Total Value",placeholder:"Enter proposal value",required:!0,min:0,prefix:"$",decimalScale:2,fixedDecimalScale:!0,thousandSeparator:",",...a.getInputProps("value")}),n.jsx(ae,{label:"Estimated Monthly Savings",placeholder:"Enter estimated monthly savings",required:!0,min:0,prefix:"$",decimalScale:2,fixedDecimalScale:!0,thousandSeparator:",",...a.getInputProps("monthlySavings")}),n.jsx(ue,{label:"Status",data:[{value:"draft",label:"Draft"},{value:"sent",label:"Sent"},{value:"accepted",label:"Accepted"},{value:"rejected",label:"Rejected"}],...a.getInputProps("status")})]})]}),n.jsxs(le,{withBorder:!0,p:"lg",children:[n.jsx(q,{order:3,size:"h4",mb:"lg",children:"Overview & Benefits"}),n.jsx(W,{gap:"md",children:n.jsx(Y,{label:"Overview",placeholder:"Enter detailed overview of the proposal",minRows:4,required:!0,...a.getInputProps("sections.overview")})})]}),n.jsxs(le,{withBorder:!0,p:"lg",children:[n.jsx(q,{order:3,size:"h4",mb:"lg",children:"Services & Pricing"}),n.jsxs(W,{gap:"md",children:[a.values.sections.serviceBreakdown.services.map((l,h)=>n.jsxs(te,{grow:!0,children:[n.jsx(ie,{label:"Service Name",placeholder:"Enter service name",required:!0,...a.getInputProps(`sections.serviceBreakdown.services.${h}.name`)}),n.jsx(Y,{label:"Description",placeholder:"Enter service description",required:!0,...a.getInputProps(`sections.serviceBreakdown.services.${h}.description`)}),n.jsx(ae,{label:"Price",placeholder:"Enter price",required:!0,min:0,prefix:"$",decimalScale:2,fixedDecimalScale:!0,thousandSeparator:",",...a.getInputProps(`sections.serviceBreakdown.services.${h}.price`)})]},h)),n.jsx(se,{variant:"light",onClick:()=>{const l=[...a.values.sections.serviceBreakdown.services];l.push({name:"",description:"",price:0}),a.setFieldValue("sections.serviceBreakdown.services",l)},children:"Add Service"})]})]}),n.jsxs(le,{withBorder:!0,p:"lg",children:[n.jsx(q,{order:3,size:"h4",mb:"lg",children:"Incentives"}),n.jsxs(W,{gap:"md",children:[a.values.incentives.map((l,h)=>n.jsxs(te,{grow:!0,children:[n.jsx(ie,{label:"Incentive Name",placeholder:"Enter incentive name",...a.getInputProps(`incentives.${h}.name`)}),n.jsx(Y,{label:"Description",placeholder:"Enter incentive description",...a.getInputProps(`incentives.${h}.description`)}),n.jsx(ae,{label:"Amount",placeholder:"Enter amount",min:0,prefix:"$",decimalScale:2,fixedDecimalScale:!0,thousandSeparator:",",...a.getInputProps(`incentives.${h}.amount`)}),n.jsx(ue,{label:"Type",data:[{value:"rebate",label:"Rebate"},{value:"tax_credit",label:"Tax Credit"},{value:"discount",label:"Discount"}],...a.getInputProps(`incentives.${h}.type`)})]},h)),n.jsx(se,{variant:"light",onClick:()=>{const l=[...a.values.incentives];l.push({name:"",description:"",amount:0,type:"rebate"}),a.setFieldValue("incentives",l)},children:"Add Incentive"})]})]})]})})}),n.jsx(Q.Panel,{value:"preview",children:n.jsx(er,{proposal:m})})]})]})}export{br as default};
